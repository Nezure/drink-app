var de=t=>{throw TypeError(t)};var X=(t,e,s)=>e.has(t)||de("Cannot "+s);var i=(t,e,s)=>(X(t,e,"read from private field"),s?s.call(t):e.get(t)),m=(t,e,s)=>e.has(t)?de("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),u=(t,e,s,r)=>(X(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),d=(t,e,s)=>(X(t,e,"access private method"),s);import{k as Oe,p as fe,l as S,s as Y,m as V,n as ke,o as Z,q as pe,t as Te,v as Ee,w as Ie,x as me,y as Re,r as C,z as Qe}from"./index-C87Y4BKz.js";var y,a,B,g,E,U,x,O,H,D,P,I,Q,k,j,n,z,ee,te,se,ie,re,ae,ne,Se,we,Ne=(we=class extends Oe{constructor(e,s){super();m(this,n);m(this,y);m(this,a);m(this,B);m(this,g);m(this,E);m(this,U);m(this,x);m(this,O);m(this,H);m(this,D);m(this,P);m(this,I);m(this,Q);m(this,k);m(this,j,new Set);this.options=s,u(this,y,e),u(this,O,null),u(this,x,fe()),this.options.experimental_prefetchInRender||i(this,x).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,a).addObserver(this),ge(i(this,a),this.options)?d(this,n,z).call(this):this.updateResult(),d(this,n,ie).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oe(i(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oe(i(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,n,re).call(this),d(this,n,ae).call(this),i(this,a).removeObserver(this)}setOptions(e){const s=this.options,r=i(this,a);if(this.options=i(this,y).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof S(this.options.enabled,i(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,n,ne).call(this),i(this,a).setOptions(this.options),s._defaulted&&!Y(this.options,s)&&i(this,y).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,a),observer:this});const c=this.hasListeners();c&&ye(i(this,a),r,this.options,s)&&d(this,n,z).call(this),this.updateResult(),c&&(i(this,a)!==r||S(this.options.enabled,i(this,a))!==S(s.enabled,i(this,a))||V(this.options.staleTime,i(this,a))!==V(s.staleTime,i(this,a)))&&d(this,n,ee).call(this);const h=d(this,n,te).call(this);c&&(i(this,a)!==r||S(this.options.enabled,i(this,a))!==S(s.enabled,i(this,a))||h!==i(this,k))&&d(this,n,se).call(this,h)}getOptimisticResult(e){const s=i(this,y).getQueryCache().build(i(this,y),e),r=this.createResult(s,e);return Me(this,r)&&(u(this,g,r),u(this,U,this.options),u(this,E,i(this,a).state)),r}getCurrentResult(){return i(this,g)}trackResult(e,s){return new Proxy(e,{get:(r,c)=>(this.trackProp(c),s==null||s(c),Reflect.get(r,c))})}trackProp(e){i(this,j).add(e)}getCurrentQuery(){return i(this,a)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,y).defaultQueryOptions(e),r=i(this,y).getQueryCache().build(i(this,y),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return d(this,n,z).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,g)))}createResult(e,s){var le;const r=i(this,a),c=this.options,h=i(this,g),o=i(this,E),T=i(this,U),w=e!==r?e.state:i(this,B),{state:_}=e;let l={..._},q=!1,f;if(s._optimisticResults){const v=this.hasListeners(),W=!v&&ge(e,s),F=v&&ye(e,r,s,c);(W||F)&&(l={...l,...Ie(_.data,e.options)}),s._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:A,errorUpdatedAt:L,status:b}=l;f=l.data;let K=!1;if(s.placeholderData!==void 0&&f===void 0&&b==="pending"){let v;h!=null&&h.isPlaceholderData&&s.placeholderData===(T==null?void 0:T.placeholderData)?(v=h.data,K=!0):v=typeof s.placeholderData=="function"?s.placeholderData((le=i(this,P))==null?void 0:le.state.data,i(this,P)):s.placeholderData,v!==void 0&&(b="success",f=me(h==null?void 0:h.data,v,s),q=!0)}if(s.select&&f!==void 0&&!K)if(h&&f===(o==null?void 0:o.data)&&s.select===i(this,H))f=i(this,D);else try{u(this,H,s.select),f=s.select(f),f=me(h==null?void 0:h.data,f,s),u(this,D,f),u(this,O,null)}catch(v){u(this,O,v)}i(this,O)&&(A=i(this,O),f=i(this,D),L=Date.now(),b="error");const J=l.fetchStatus==="fetching",N=b==="pending",$=b==="error",ue=N&&J,ce=f!==void 0,R={status:b,fetchStatus:l.fetchStatus,isPending:N,isSuccess:b==="success",isError:$,isInitialLoading:ue,isLoading:ue,data:f,dataUpdatedAt:l.dataUpdatedAt,error:A,errorUpdatedAt:L,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>w.dataUpdateCount||l.errorUpdateCount>w.errorUpdateCount,isFetching:J,isRefetching:J&&!N,isLoadingError:$&&!ce,isPaused:l.fetchStatus==="paused",isPlaceholderData:q,isRefetchError:$&&ce,isStale:he(e,s),refetch:this.refetch,promise:i(this,x)};if(this.options.experimental_prefetchInRender){const v=G=>{R.status==="error"?G.reject(R.error):R.data!==void 0&&G.resolve(R.data)},W=()=>{const G=u(this,x,R.promise=fe());v(G)},F=i(this,x);switch(F.status){case"pending":e.queryHash===r.queryHash&&v(F);break;case"fulfilled":(R.status==="error"||R.data!==F.value)&&W();break;case"rejected":(R.status!=="error"||R.error!==F.reason)&&W();break}}return R}updateResult(){const e=i(this,g),s=this.createResult(i(this,a),this.options);if(u(this,E,i(this,a).state),u(this,U,this.options),i(this,E).data!==void 0&&u(this,P,i(this,a)),Y(s,e))return;u(this,g,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:c}=this.options,h=typeof c=="function"?c():c;if(h==="all"||!h&&!i(this,j).size)return!0;const o=new Set(h??i(this,j));return this.options.throwOnError&&o.add("error"),Object.keys(i(this,g)).some(T=>{const p=T;return i(this,g)[p]!==e[p]&&o.has(p)})};d(this,n,Se).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,n,ie).call(this)}},y=new WeakMap,a=new WeakMap,B=new WeakMap,g=new WeakMap,E=new WeakMap,U=new WeakMap,x=new WeakMap,O=new WeakMap,H=new WeakMap,D=new WeakMap,P=new WeakMap,I=new WeakMap,Q=new WeakMap,k=new WeakMap,j=new WeakMap,n=new WeakSet,z=function(e){d(this,n,ne).call(this);let s=i(this,a).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(ke)),s},ee=function(){d(this,n,re).call(this);const e=V(this.options.staleTime,i(this,a));if(Z||i(this,g).isStale||!pe(e))return;const r=Te(i(this,g).dataUpdatedAt,e)+1;u(this,I,setTimeout(()=>{i(this,g).isStale||this.updateResult()},r))},te=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,a)):this.options.refetchInterval)??!1},se=function(e){d(this,n,ae).call(this),u(this,k,e),!(Z||S(this.options.enabled,i(this,a))===!1||!pe(i(this,k))||i(this,k)===0)&&u(this,Q,setInterval(()=>{(this.options.refetchIntervalInBackground||Ee.isFocused())&&d(this,n,z).call(this)},i(this,k)))},ie=function(){d(this,n,ee).call(this),d(this,n,se).call(this,d(this,n,te).call(this))},re=function(){i(this,I)&&(clearTimeout(i(this,I)),u(this,I,void 0))},ae=function(){i(this,Q)&&(clearInterval(i(this,Q)),u(this,Q,void 0))},ne=function(){const e=i(this,y).getQueryCache().build(i(this,y),this.options);if(e===i(this,a))return;const s=i(this,a);u(this,a,e),u(this,B,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Se=function(e){Re.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,g))}),i(this,y).getQueryCache().notify({query:i(this,a),type:"observerResultsUpdated"})})},we);function Fe(t,e){return S(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ge(t,e){return Fe(t,e)||t.state.data!==void 0&&oe(t,e,e.refetchOnMount)}function oe(t,e,s){if(S(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&he(t,e)}return!1}function ye(t,e,s,r){return(t!==e||S(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&he(t,s)}function he(t,e){return S(e.enabled,t)!==!1&&t.isStaleByTime(V(e.staleTime,t))}function Me(t,e){return!Y(t.getCurrentResult(),e)}var Ce=C.createContext(!1),Ue=()=>C.useContext(Ce);Ce.Provider;function De(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Pe=C.createContext(De()),je=()=>C.useContext(Pe);function _e(t,e){return typeof t=="function"?t(...e):!!t}function be(){}var qe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Ae=t=>{C.useEffect(()=>{t.clearReset()},[t])},Le=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:c})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(c&&t.data===void 0||_e(s,[t.error,r])),$e=(t,e)=>e.state.data===void 0,ze=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Be=(t,e)=>t.isLoading&&t.isFetching&&!e,He=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ve=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Xe(t,e,s){var l,q,f,A,L;const r=Qe(),c=Ue(),h=je(),o=r.defaultQueryOptions(t);(q=(l=r.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||q.call(l,o),o._optimisticResults=c?"isRestoring":"optimistic",ze(o),qe(o,h),Ae(h);const T=!r.getQueryCache().get(o.queryHash),[p]=C.useState(()=>new e(r,o)),w=p.getOptimisticResult(o),_=!c&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(b=>{const K=_?p.subscribe(Re.batchCalls(b)):be;return p.updateResult(),K},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),C.useEffect(()=>{p.setOptions(o)},[o,p]),He(o,w))throw ve(o,p,h);if(Le({result:w,errorResetBoundary:h,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw w.error;if((A=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||A.call(f,o,w),o.experimental_prefetchInRender&&!Z&&Be(w,c)){const b=T?ve(o,p,h):(L=r.getQueryCache().get(o.queryHash))==null?void 0:L.promise;b==null||b.catch(be).finally(()=>{p.updateResult()})}return o.notifyOnChangeProps?w:p.trackResult(w)}async function Ke(){return new Promise(t=>{setTimeout(()=>{t(xe)},1100)})}function We(t){return new Promise((e,s)=>{setTimeout(()=>{const r=xe.find(c=>c.id===t);if(!r)return s(new Error("Drink not found"));e(r)},1100)})}const xe=[{id:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"Margarita",description:"A classic, refreshing Mexican cocktail combining tequila, lime juice, and orange liqueur with a salted rim.",ingredients:[{name:"Tequila",category:"Spirit",amount:"2",unit:"oz"},{name:"Fresh lime juice",category:"Juice",amount:"1",unit:"oz"},{name:"Triple sec (or Cointreau)",category:"Liqueur",amount:"1",unit:"oz"},{name:"Salt",category:"Garnish",amount:"For rim"},{name:"Ice",amount:"As needed"}],imageUrl:"https://www.thecocktaildb.com/images/media/drink/5noda61589575158.jpg",alcohol:20,instructionSteps:[{order:1,text:"Rub a lime wedge around the rim of a chilled cocktail glass and dip the rim in salt."},{order:2,text:"Add tequila, lime juice, and triple sec into a shaker filled with ice."},{order:3,text:"Shake vigorously for 10â€“15 seconds."},{order:4,text:"Strain into the prepared glass over fresh ice or serve straight up."}]},{id:"9b2e1a4c-33e7-46dd-819e-92870b8da6a2",name:"Old Fashioned",description:"The quintessential whiskey cocktail, built simply with sugar, bitters, and a twist of citrus.",ingredients:[{name:"Bourbon or rye whiskey",category:"Spirit",amount:"2",unit:"oz"},{name:"Sugar cube",category:"Sweetener",amount:"1"},{name:"Angostura bitters",category:"Bitters",amount:"2",unit:"dashes"},{name:"Orange peel",category:"Garnish",amount:"1",unit:"twist"},{name:"Ice",amount:"1",unit:"large cube"}],imageUrl:"https://www.thecocktaildb.com/images/media/drink/vrwquq1478252802.jpg",alcohol:32,instructionSteps:[{order:1,text:"Place the sugar cube in an Old Fashioned glass and saturate with bitters."},{order:2,text:"Add a few drops of water and muddle until the sugar is dissolved."},{order:3,text:"Fill the glass with a large ice cube, pour the whiskey over, and gently stir to combine."},{order:4,text:"Express the oil of an orange peel over the glass, then drop in as garnish."}]},{id:"fa8d5de7-46e5-4b2e-8a12-1a6f5012fa08",name:"Mojito",description:"A refreshing Cuban highball of rum, lime, mint, and soda water.",ingredients:[{name:"White rum",category:"Spirit",amount:"2",unit:"oz"},{name:"Fresh lime juice",category:"Juice",amount:"1",unit:"oz"},{name:"Simple syrup",category:"Sweetener",amount:"0.75",unit:"oz"},{name:"Mint leaves",category:"Herb",amount:"6",unit:""},{name:"Soda water",category:"Mixer",amount:"Top"},{name:"Ice",amount:"As needed"}],imageUrl:"https://www.thecocktaildb.com/images/media/drink/mkp38616067763732.jpg",alcohol:14,instructionSteps:[{order:1,text:"Muddle mint leaves with simple syrup and lime juice in a glass."},{order:2,text:"Fill the glass with ice and pour in the rum."},{order:3,text:"Top with soda water and gently stir."},{order:4,text:"Garnish with a sprig of mint."}]}],M={all:["drinks"],lists:()=>[...M.all,"lists"],list:t=>[...M.lists(),t],detail:t=>[...M.all,"details",t],details:()=>[...M.all,"details"]};function Ye(){return{queryKey:M.lists(),queryFn:async()=>await Ke()}}function Ze(t){return{queryKey:M.detail(t),queryFn:async()=>await We(t)}}export{Ne as Q,$e as a,Ze as b,Ye as d,Xe as u};
